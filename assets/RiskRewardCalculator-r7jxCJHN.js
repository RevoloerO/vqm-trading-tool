import{r as e,j as s}from"./vendor-react-CTd1lJGF.js";import{a as r}from"./calculator-utils-D6XIt9t1.js";import{u as a}from"./useDebounce-DjtQynKA.js";import{F as t,B as l}from"./FormInput-Bt1utgF7.js";import{E as n}from"./ErrorMessage-Bc4J8QHo.js";import"./vendor-6ULW7vKx.js";const i={MAX_PRICE:1e6,MIN_PRICE:.01},u={MUST_BE_NUMBER:"Must be a valid number",MUST_BE_POSITIVE:"Must be greater than zero",MUST_BE_FINITE:"Must be a finite number",PRICE_TOO_HIGH:`Cannot exceed $${i.MAX_PRICE.toLocaleString()}`,PRICE_TOO_LOW:`Must be at least $${i.MIN_PRICE}`,STOP_EQUALS_ENTRY:"Stop loss cannot equal entry price",INVALID_POSITION_SETUP:"Invalid setup. Long: Stop < Entry < Target. Short: Target < Entry < Stop"},c=e.memo(function({message:e,variant:r="success"}){return e?s.jsx("div",{className:`info-badge ${r}`,children:e}):null}),o=e.memo(function({message:e}){return e?s.jsx("div",{className:"relationship-error",children:s.jsx("span",{className:"field-error",children:e})}):null});function d(){const[d,p]=e.useState(""),[m,_]=e.useState(""),[E,N]=e.useState(""),[I,h]=e.useState(null),[T,f]=e.useState(null),[S,j]=e.useState(!1),R=e.useRef(null),P=e.useRef(null),g=e.useRef(null),x=a(d,300),v=a(m,300),M=a(E,300),[O,C]=e.useState({entry:null,stop:null,target:null,relationship:null}),b=e=>{if(!e||""===e)return null;const s=parseFloat(e);return isNaN(s)?u.MUST_BE_NUMBER:isFinite(s)?s<=0?u.MUST_BE_POSITIVE:s<i.MIN_PRICE?u.PRICE_TOO_LOW:s>i.MAX_PRICE?u.PRICE_TOO_HIGH:null:u.MUST_BE_FINITE},y=(e,s)=>{if(!e||""===e)return null;const r=parseFloat(e);return isNaN(r)?u.MUST_BE_NUMBER:isFinite(r)?r<=0?u.MUST_BE_POSITIVE:r<i.MIN_PRICE?u.PRICE_TOO_LOW:r>i.MAX_PRICE?u.PRICE_TOO_HIGH:s&&parseFloat(s)===r?u.STOP_EQUALS_ENTRY:null:u.MUST_BE_FINITE},U=e=>{if(!e||""===e)return null;const s=parseFloat(e);return isNaN(s)?u.MUST_BE_NUMBER:isFinite(s)?s<=0?u.MUST_BE_POSITIVE:s<i.MIN_PRICE?u.PRICE_TOO_LOW:s>i.MAX_PRICE?u.PRICE_TOO_HIGH:null:u.MUST_BE_FINITE},B=(e,s,r)=>{if(!e||!s||!r)return null;const a=parseFloat(e),t=parseFloat(s),l=parseFloat(r);return isNaN(a)||isNaN(t)||isNaN(l)||t<a&&l>a||t>a&&l<a?null:u.INVALID_POSITION_SETUP};return e.useEffect(()=>{const e=b(x),s=y(v,x),r=U(M),a=B(x,v,M);C({entry:e,stop:s,target:r,relationship:a})},[x,v,M]),e.useEffect(()=>{O.entry&&R.current?R.current.focus():O.stop&&P.current?P.current.focus():O.target&&g.current&&g.current.focus()},[O.entry,O.stop,O.target]),s.jsxs("div",{className:"calculator-card",children:[s.jsxs("div",{className:"calculator-header",children:[s.jsx("h2",{className:"calculator-title",children:"Risk/Reward Calculator"}),s.jsx("p",{className:"calculator-subtitle",children:"Analyze your trade setup with risk-to-reward ratio"})]}),s.jsxs("form",{className:"calculator-form",onSubmit:e=>{e.preventDefault(),(async()=>{j(!0),await new Promise(e=>setTimeout(e,100));const e=b(d),s=y(m,d),a=U(E),t=B(d,m,E);if(e||s||a||t)return C({entry:e,stop:s,target:a,relationship:t}),h(null),f("Please fix the errors above before calculating"),void j(!1);const l=r({entryPrice:d,stopLoss:m,targetPrice:E});l.success?(h(l.data),f(null)):(h(null),f(l.error)),j(!1)})()},children:[s.jsx(t,{ref:R,label:"Entry Price",value:d,onChange:e=>{p(e.target.value)},error:O.entry,placeholder:"50.00",step:"0.01",prefix:"$",required:!0}),s.jsx(t,{ref:P,label:"Stop Loss",value:m,onChange:e=>{_(e.target.value)},error:O.stop,placeholder:"48.00",step:"0.01",prefix:"$",required:!0}),s.jsx(t,{ref:g,label:"Target Price",value:E,onChange:e=>{N(e.target.value)},error:O.target,placeholder:"56.00",step:"0.01",prefix:"$",required:!0}),s.jsx(o,{message:O.relationship}),s.jsxs("div",{className:"button-group",children:[s.jsx(l,{type:"submit",variant:"primary",disabled:O.entry||O.stop||O.target||O.relationship||S,children:S?"Calculating...":"Calculate R:R"}),s.jsx(l,{type:"button",onClick:function(e){e&&e.preventDefault&&e.preventDefault(),p(""),_(""),N(""),h(null),f(null),C({entry:null,stop:null,target:null,relationship:null})},variant:"secondary",disabled:S,children:"Clear"})]})]}),I&&s.jsxs("div",{className:"results-card "+(I.isValidTrade?"success":"warning"),children:[s.jsx("h3",{className:"results-title",children:"Results"}),s.jsxs("div",{className:"results-grid",children:[s.jsxs("div",{className:"result-item",children:[s.jsx("span",{className:"result-label",children:"Position Type"}),s.jsx("span",{className:"result-value",children:I.positionType})]}),s.jsxs("div",{className:"result-item",children:[s.jsx("span",{className:"result-label",children:"R:R Ratio"}),s.jsxs("span",{className:"result-value "+(I.isValidTrade?"success":"warning"),children:["1:",I.rrRatio]})]}),s.jsxs("div",{className:"result-item",children:[s.jsx("span",{className:"result-label",children:"Risk Per Share"}),s.jsxs("span",{className:"result-value risk",children:["$",I.riskPerShare]})]}),s.jsxs("div",{className:"result-item",children:[s.jsx("span",{className:"result-label",children:"Reward Per Share"}),s.jsxs("span",{className:"result-value success",children:["$",I.rewardPerShare]})]})]}),s.jsx(c,{message:I.isValidTrade?"Favorable risk/reward ratio detected!":"R:R ratio is below 1:1. Consider adjusting your targets for better risk management.",variant:I.isValidTrade?"success":"warning"})]}),s.jsx(n,{message:T})]})}export{d as default};

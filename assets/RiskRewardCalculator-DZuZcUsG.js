import{r as e,j as s}from"./vendor-react-CTd1lJGF.js";import{a as r}from"./calculator-utils-BbBPhFod.js";import{u as a}from"./useDebounce-DjtQynKA.js";import{F as t,B as l}from"./FormInput-DRcjtEwE.js";import{E as n}from"./ErrorMessage-Bc4J8QHo.js";import"./vendor-6ULW7vKx.js";const i=e.memo(function({message:e,variant:r="success"}){return e?s.jsx("div",{className:`info-badge ${r}`,children:e}):null}),u=e.memo(function({message:e}){return e?s.jsx("div",{className:"relationship-error",children:s.jsx("span",{className:"field-error",children:e})}):null});function o(){const[o,c]=e.useState(""),[d,p]=e.useState(""),[m,h]=e.useState(""),[j,x]=e.useState(null),[g,v]=e.useState(null),N=a(o,300),b=a(d,300),f=a(m,300),[y,S]=e.useState({entry:null,stop:null,target:null,relationship:null}),F=1e5,R=e=>{if(!e||""===e)return null;const s=parseFloat(e);return isNaN(s)?"Must be a valid number":isFinite(s)?s<=0?"Must be greater than zero":s>F?`Cannot exceed $${F.toLocaleString()}`:null:"Must be a finite number"},C=(e,s)=>{if(!e||""===e)return null;const r=parseFloat(e);return isNaN(r)?"Must be a valid number":isFinite(r)?r<=0?"Must be greater than zero":r>F?`Cannot exceed $${F.toLocaleString()}`:s&&parseFloat(s)===r?"Cannot equal entry price":null:"Must be a finite number"},$=e=>{if(!e||""===e)return null;const s=parseFloat(e);return isNaN(s)?"Must be a valid number":isFinite(s)?s<=0?"Must be greater than zero":s>F?`Cannot exceed $${F.toLocaleString()}`:null:"Must be a finite number"},w=(e,s,r)=>{if(!e||!s||!r)return null;const a=parseFloat(e),t=parseFloat(s),l=parseFloat(r);return isNaN(a)||isNaN(t)||isNaN(l)||t<a&&l>a||t>a&&l<a?null:"Invalid setup. Long: Stop < Entry < Target. Short: Target < Entry < Stop"};return e.useEffect(()=>{const e=R(N),s=C(b,N),r=$(f),a=w(N,b,f);S({entry:e,stop:s,target:r,relationship:a})},[N,b,f]),s.jsxs("div",{className:"calculator-card",children:[s.jsxs("div",{className:"calculator-header",children:[s.jsx("h2",{className:"calculator-title",children:"Risk/Reward Calculator"}),s.jsx("p",{className:"calculator-subtitle",children:"Analyze your trade setup with risk-to-reward ratio"})]}),s.jsxs("form",{className:"calculator-form",onSubmit:e=>{e.preventDefault(),(()=>{const e=R(o),s=C(d,o),a=$(m),t=w(o,d,m);if(e||s||a||t)return S({entry:e,stop:s,target:a,relationship:t}),x(null),void v("Please fix the errors above before calculating");const l=r({entryPrice:o,stopLoss:d,targetPrice:m});l.success?(x(l.data),v(null)):(x(null),v(l.error))})()},children:[s.jsx(t,{label:"Entry Price",value:o,onChange:e=>{c(e.target.value)},error:y.entry,placeholder:"50.00",step:"0.01",prefix:"$",required:!0}),s.jsx(t,{label:"Stop Loss",value:d,onChange:e=>{p(e.target.value)},error:y.stop,placeholder:"48.00",step:"0.01",prefix:"$",required:!0}),s.jsx(t,{label:"Target Price",value:m,onChange:e=>{h(e.target.value)},error:y.target,placeholder:"56.00",step:"0.01",prefix:"$",required:!0}),s.jsx(u,{message:y.relationship}),s.jsxs("div",{className:"button-group",children:[s.jsx(l,{type:"submit",variant:"primary",disabled:y.entry||y.stop||y.target||y.relationship,children:"Calculate R:R"}),s.jsx(l,{type:"button",onClick:function(e){e&&e.preventDefault&&e.preventDefault(),c(""),p(""),h(""),x(null),v(null),S({entry:null,stop:null,target:null,relationship:null})},variant:"secondary",children:"Clear"})]})]}),j&&s.jsxs("div",{className:"results-card "+(j.isValidTrade?"success":"warning"),children:[s.jsx("h3",{className:"results-title",children:"Results"}),s.jsxs("div",{className:"results-grid",children:[s.jsxs("div",{className:"result-item",children:[s.jsx("span",{className:"result-label",children:"Position Type"}),s.jsx("span",{className:"result-value",children:j.positionType})]}),s.jsxs("div",{className:"result-item",children:[s.jsx("span",{className:"result-label",children:"R:R Ratio"}),s.jsxs("span",{className:"result-value "+(j.isValidTrade?"success":"warning"),children:["1:",j.rrRatio]})]}),s.jsxs("div",{className:"result-item",children:[s.jsx("span",{className:"result-label",children:"Risk Per Share"}),s.jsxs("span",{className:"result-value risk",children:["$",j.riskPerShare]})]}),s.jsxs("div",{className:"result-item",children:[s.jsx("span",{className:"result-label",children:"Reward Per Share"}),s.jsxs("span",{className:"result-value success",children:["$",j.rewardPerShare]})]})]}),s.jsx(i,{message:j.isValidTrade?"Favorable risk/reward ratio detected!":"R:R ratio is below 1:1. Consider adjusting your targets for better risk management.",variant:j.isValidTrade?"success":"warning"})]}),s.jsx(n,{message:g})]})}export{o as default};
